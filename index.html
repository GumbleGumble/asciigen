<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>asciigen</title> <!-- Updated project name -->
    <script src="https://cdn.tailwindcss.com"></script> <!-- Keep Tailwind for styling -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Courier+Prime&display=swap" rel="stylesheet">
</head>
<body class="p-4 md:p-8">

    <!-- Updated h1 class list -->
    <h1 class="text-4xl md:text-5xl font-mono font-bold text-center mb-6 text-blue-300 title-shadow">asciigen</h1>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Controls Column -->
        <div class="md:col-span-1 space-y-4">
            <!-- General Controls Section -->
            <div class="control-section">
                <h2 class="text-xl font-semibold mb-3 text-gray-100">General Controls</h2>
                <!-- Ensure IDs match uiElements in script.js -->
                <div>
                    <label for="resolution-slider" class="slider-label">ASCII Resolution:</label>
                    <input type="range" id="resolution-slider" name="resolution" min="30" max="150" value="80">
                    <span class="text-sm text-gray-400">Cols: <span id="resolution-value">80</span></span>
                </div>
                <div>
                    <label for="charset-select" class="slider-label">Character Set:</label>
                    <select id="charset-select">
                        <option value="dense">@%#*+=-:. </option>
                        <option value="simple">#=-. </option>
                        <option value="blocks">█▓▒░ </option>
                        <option value="complex">$@B%8&WM#*oahkbdpqwmZO0QLCJUYXzcvunxrjft/\|()1{}[]?-_+~<>i!lI;:,"^`'. </option>
                        <option value="binary">10</option>
                    </select>
                </div>
                <div>
                    <label for="brightness-slider" class="slider-label">Brightness Offset:</label> <!-- Changed label for clarity -->
                    <input type="range" id="brightness-slider" name="brightness" min="0" max="1" value="0.5" step="0.01">
                    <span class="text-sm text-gray-400"><span id="brightness-value">0.50</span></span> <!-- Added value display -->
                </div>
                <div>
                    <label for="contrast-slider" class="slider-label">Contrast:</label>
                    <input type="range" id="contrast-slider" name="contrast" min="0.1" max="5" value="1.0" step="0.1">
                    <span class="text-sm text-gray-400"><span id="contrast-value">1.0</span></span> <!-- Added value display -->
                </div>
                <div>
                    <label for="zoom-slider" class="slider-label">Zoom:</label>
                    <input type="range" id="zoom-slider" name="zoom" min="3" max="40" value="15" step="0.1">
                    <span class="text-sm text-gray-400"><span id="zoom-value">15.0</span></span> <!-- Added value display -->
                </div>
                <div class="mt-3">
                    <input type="checkbox" id="invert-brightness-checkbox">
                    <label for="invert-brightness-checkbox" class="inline-label slider-label">Invert Brightness</label>
                </div>
                <div>
                    <label for="renderTargetResolution" class="block text-sm font-medium text-gray-400">Render Resolution Scale (<span id="renderTargetResolutionValue">1.0</span>)</label>
                    <input type="range" id="renderTargetResolution" min="0.1" max="1.5" step="0.05" value="1.0" class="w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer range-lg dark:bg-gray-700">
                </div>
                <div class="mt-4 grid grid-cols-2 gap-2">
                    <!-- Ensure button IDs match script.js -->
                    <button id="pausePlayButton">Pause</button>
                    <button id="randomizeButton">Randomize</button>
                </div>
            </div>

            <!-- Lighting Controls Section -->
            <!-- Added ID for script.js control -->
            <div id="lighting-controls" class="control-section animation-controls">
                <h2 class="text-xl font-semibold mb-3 text-gray-100">Lighting Controls</h2>
                <div>
                    <label for="ambient-intensity-slider" class="slider-label">Ambient Intensity:</label>
                    <input type="range" id="ambient-intensity-slider" name="ambient-intensity" min="0" max="2" value="0.5" step="0.05">
                    <span class="text-sm text-gray-400"><span id="ambient-intensity-value">0.50</span></span>
                </div>
                <div>
                    <label for="directional-intensity-slider" class="slider-label">Directional Intensity:</label>
                    <input type="range" id="directional-intensity-slider" name="directional-intensity" min="0" max="3" value="0.8" step="0.1">
                    <span class="text-sm text-gray-400"><span id="directional-intensity-value">0.8</span></span>
                </div>
                <div>
                    <label for="light-pos-x-slider" class="slider-label">Light X Position:</label>
                    <input type="range" id="light-pos-x-slider" name="light-pos-x" min="-10" max="10" value="1" step="0.5">
                    <span class="text-sm text-gray-400"><span id="light-pos-x-value">1.0</span></span>
                </div>
                <div>
                    <label for="light-pos-y-slider" class="slider-label">Light Y Position:</label>
                    <input type="range" id="light-pos-y-slider" name="light-pos-y" min="-10" max="10" value="1" step="0.5">
                    <span class="text-sm text-gray-400"><span id="light-pos-y-value">1.0</span></span>
                </div>
                <div>
                    <label for="light-pos-z-slider" class="slider-label">Light Z Position:</label>
                    <input type="range" id="light-pos-z-slider" name="light-pos-z" min="-10" max="10" value="1" step="0.5">
                    <span class="text-sm text-gray-400"><span id="light-pos-z-value">1.0</span></span>
                </div>
            </div>

            <!-- Animation Type Selection -->
            <div class="control-section">
                <h2 class="text-xl font-semibold mb-3 text-gray-100">Animation Type</h2>
                <!-- Ensure ID matches script.js -->
                <select id="animationType"> <!-- Changed ID from animation-select -->
                    <option value="torus">Rotating Torus</option>
                    <option value="noise">Noise Field</option>
                    <option value="particles">Particle System</option>
                    <option value="kaleidoscope">Kaleidoscope</option>
                    <option value="morph">Shape Morphing</option>
                    <option value="metaballs">Metaballs / Gooey Blobs</option>
                    <option value="lissajous" selected>Lissajous Curves</option>
                </select>
            </div>

            <!-- Animation Specific Controls (Ensure IDs match script.js and modules) -->
            <div id="torus-controls" class="control-section animation-controls">
                <h2 class="text-xl font-semibold mb-3 text-gray-100">Torus Controls</h2>
                <div>
                    <label for="torus-speed-slider" class="slider-label">Rotation Speed:</label>
                    <input type="range" id="torus-speed-slider" name="torus-speed" min="0.1" max="3.0" value="1.0" step="0.1">
                    <span class="text-sm text-gray-400"><span id="torus-speed-value">1.00</span></span> <!-- Added value display -->
                </div>
                <div>
                    <label for="torus-thickness-slider" class="slider-label">Thickness Ratio:</label>
                    <input type="range" id="torus-thickness-slider" name="torus-thickness" min="0.1" max="0.9" value="0.3" step="0.05">
                    <span class="text-sm text-gray-400"><span id="torus-thickness-value">0.3</span></span>
                </div>
                <div>
                    <label for="torusMajorRadius" class="block text-sm font-medium text-gray-400">Major Radius (<span id="torusMajorRadiusValue">1.0</span>)</label> <!-- Updated default display -->
                    <input type="range" id="torusMajorRadius" min="0.5" max="3.0" step="0.1" value="1.0" class="w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer range-lg dark:bg-gray-700">
                </div>
                 <div> <!-- Added Roughness -->
                    <label for="torus-roughness-slider" class="slider-label">Roughness:</label>
                    <input type="range" id="torus-roughness-slider" name="torus-roughness" min="0" max="1" value="0.5" step="0.05">
                    <span class="text-sm text-gray-400"><span id="torus-roughness-value">0.50</span></span>
                </div>
                <div> <!-- Added Metalness -->
                    <label for="torus-metalness-slider" class="slider-label">Metalness:</label>
                    <input type="range" id="torus-metalness-slider" name="torus-metalness" min="0" max="1" value="0.1" step="0.05">
                    <span class="text-sm text-gray-400"><span id="torus-metalness-value">0.10</span></span>
                </div>
                <div>
                    <label for="torusRotationAxis" class="block text-sm font-medium text-gray-400">Rotation Axis</label>
                    <select id="torusRotationAxis" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-600 bg-gray-700 text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                        <option value="y">Y Axis</option>
                        <option value="x">X Axis</option>
                        <option value="z">Z Axis</option>
                        <option value="xy">X+Y Axis</option>
                    </select>
                </div>
            </div>

            <div id="noise-controls" class="control-section animation-controls">
                <h2 class="text-xl font-semibold mb-3 text-gray-100">Noise Field Controls</h2>
                <div>
                    <label for="noise-scale-slider" class="slider-label">Noise Scale:</label>
                    <input type="range" id="noise-scale-slider" name="noise-scale" min="0.5" max="10.0" value="4.0" step="0.5">
                    <span class="text-sm text-gray-400"><span id="noise-scale-value">4.0</span></span> <!-- Added value display -->
                </div>
                <div>
                    <label for="noise-speed-slider" class="slider-label">Animation Speed:</label>
                    <input type="range" id="noise-speed-slider" name="noise-speed" min="0.1" max="3.0" value="1.0" step="0.1">
                    <span class="text-sm text-gray-400"><span id="noise-speed-value">1.0</span></span> <!-- Added value display -->
                </div>
                <div>
                    <label for="noise-brightness-slider" class="slider-label">Brightness:</label>
                    <input type="range" id="noise-brightness-slider" name="noise-brightness" min="0.1" max="5.0" value="1.0" step="0.1">
                    <span class="text-sm text-gray-400"><span id="noise-brightness-value">1.0</span></span> <!-- Added value display -->
                </div>
            </div>

            <div id="particles-controls" class="control-section animation-controls">
                <h2 class="text-xl font-semibold mb-3 text-gray-100">Particle System Controls</h2>
                <div></div>
                    <label for="particles-count-slider" class="slider-label">Particle Count:</label>
                    <input type="range" id="particles-count-slider" name="particles-count" min="100" max="10000" value="1000" step="100">
                    <span class="text-sm text-gray-400"><span id="particles-count-value">1000</span> particles</span>
                </div>
                <div>
                    <label for="particles-size-slider" class="slider-label">Particle Size:</label>
                    <input type="range" id="particles-size-slider" name="particles-size" min="0.1" max="2.0" value="0.5" step="0.1">
                    <span class="text-sm text-gray-400"><span id="particle-size-value">0.5</span></span> <!-- Added value display -->
                </div>
                <div>
                    <label for="particles-speed-slider" class="slider-label">Speed:</label>
                    <input type="range" id="particles-speed-slider" name="particles-speed" min="0.1" max="5.0" value="1.0" step="0.1">
                    <span class="text-sm text-gray-400"><span id="particle-speed-value">1.0</span></span> <!-- Added value display -->
                </div>
                <div>
                    <label for="particles-lifespan-slider" class="slider-label">Lifespan:</label>
                    <input type="range" id="particles-lifespan-slider" name="particles-lifespan" min="1" max="10" value="3" step="0.5">
                    <span class="text-sm text-gray-400"><span id="particle-lifespan-value">3.0</span> s</span> <!-- Added value display -->
                </div>
                <div>
                    <label for="particles-emitter-shape" class="slider-label">Emitter Shape:</label>
                    <select id="particles-emitter-shape">
                        <option value="box">Box</option>
                        <option value="sphere">Sphere</option>
                        <option value="point">Point</option>
                    </select>
                </div>
                <div>
                    <label for="particles-emitter-size-slider" class="slider-label">Emitter Size:</label>
                    <input type="range" id="particles-emitter-size-slider" name="particles-emitter-size" min="0.1" max="10.0" value="5.0" step="0.1">
                    <span class="text-sm text-gray-400"><span id="particle-emitter-size-value">5.0</span></span> <!-- Added value display -->
                </div>
                <div>
                    <label for="particles-force-type" class="slider-label">Force Type:</label>
                    <select id="particles-force-type">
                        <option value="none">None</option>
                        <option value="gravity">Gravity</option>
                        <option value="vortex">Vortex</option>
                        <option value="flow">Flow Field</option> <!-- Added -->
                        <option value="attract">Attract Origin</option> <!-- Added -->
                        <option value="repel">Repel Origin</option> <!-- Added -->
                    </select>
                </div>
                <div>
                    <label for="particles-force-strength-slider" class="slider-label">Force Strength:</label>
                    <input type="range" id="particles-force-strength-slider" name="particles-force-strength" min="0.1" max="5.0" value="1.0" step="0.1">
                    <span class="text-sm text-gray-400"><span id="particle-force-strength-value">1.0</span></span> <!-- Added value display -->
                </div>
            </div>

            <div id="kaleidoscope-controls" class="control-section animation-controls">
                <h2 class="text-xl font-semibold mb-3 text-gray-100">Kaleidoscope Controls</h2>
                <div></div>
                    <label for="kaleidoscope-segments-slider" class="slider-label">Segments:</label>
                    <input type="range" id="kaleidoscope-segments-slider" name="kal-segments" min="2" max="16" value="6" step="1">
                    <span class="text-sm text-gray-400"><span id="kaleidoscope-segments-value">6</span> segments</span>
                </div>
                <div>
                    <label for="kaleidoscope-noise-scale-slider" class="slider-label">Noise Scale:</label>
                    <input type="range" id="kaleidoscope-noise-scale-slider" name="kal-noise-scale" min="0.5" max="10.0" value="4.0" step="0.5">
                    <span class="text-sm text-gray-400"><span id="kaleidoscope-noise-scale-value">4.0</span></span> <!-- Added value display -->
                </div>
                <div>
                    <label for="kaleidoscope-noise-speed-slider" class="slider-label">Noise Speed:</label>
                    <input type="range" id="kaleidoscope-noise-speed-slider" name="kal-noise-speed" min="0.1" max="3.0" value="1.0" step="0.1">
                    <span class="text-sm text-gray-400"><span id="kaleidoscope-noise-speed-value">1.0</span></span> <!-- Added value display -->
                </div>
                <div>
                    <label for="kaleidoscope-noise-brightness-slider" class="slider-label">Brightness:</label>
                    <input type="range" id="kaleidoscope-noise-brightness-slider" name="kal-noise-brightness" min="0.1" max="5.0" value="1.0" step="0.1">
                    <span class="text-sm text-gray-400"><span id="kaleidoscope-noise-brightness-value">1.0</span></span> <!-- Added value display -->
                </div>
            </div>

            <div id="morph-controls" class="control-section animation-controls">
                <h2 class="text-xl font-semibold mb-3 text-gray-100">Shape Morphing Controls</h2>
                <div></div>
                    <label for="morph-speed-slider" class="slider-label">Morph Speed:</label>
                    <input type="range" id="morph-speed-slider" name="morph-speed" min="0.1" max="3.0" value="1.0" step="0.1">
                    <span class="text-sm text-gray-400"><span id="morph-speed-value">1.0</span></span> <!-- Added value display -->
                </div>
                <div>
                    <label for="morph-rotation-slider" class="slider-label">Rotation Speed:</label>
                    <input type="range" id="morph-rotation-slider" name="morph-rotation" min="0" max="3.0" value="1.0" step="0.1">
                    <span class="text-sm text-gray-400"><span id="morph-rotation-speed-value">1.0</span></span> <!-- Added value display -->
                </div>
                <div> <!-- Added Complexity Slider -->
                    <label for="morph-complexity-slider" class="slider-label">Complexity:</label>
                    <input type="range" id="morph-complexity-slider" name="morph-complexity" min="8" max="64" value="32" step="4">
                    <span class="text-sm text-gray-400"><span id="morph-complexity-value">32</span></span>
                </div>
            </div>

            <div id="metaballs-controls" class="control-section animation-controls">
                <h2 class="text-xl font-semibold mb-3 text-gray-100">Metaballs Controls</h2>
                <div></div>
                    <label for="metaballs-count-slider" class="slider-label">Ball Count:</label>
                    <input type="range" id="metaballs-count-slider" name="mb-count" min="3" max="25" value="8" step="1">
                    <span class="text-sm text-gray-400"><span id="mb-count-value">8</span> balls</span>
                </div>
                <div>
                    <label for="metaballs-size-slider" class="slider-label">Ball Size:</label>
                    <input type="range" id="metaballs-size-slider" name="mb-size" min="0.2" max="3.0" value="1.2" step="0.1">
                    <span class="text-sm text-gray-400"><span id="mb-size-value">1.2</span></span>
                </div>
                <div>
                    <label for="metaballs-speed-slider" class="slider-label">Movement Speed:</label>
                    <input type="range" id="metaballs-speed-slider" name="mb-speed" min="0.1" max="3.0" value="1.0" step="0.1">
                    <span class="text-sm text-gray-400"><span id="mb-speed-value">1.0</span></span> <!-- Added value display -->
                </div>
                <div>
                    <label for="metaballs-threshold-slider" class="slider-label">Blend Threshold:</label>
                    <input type="range" id="metaballs-threshold-slider" name="mb-threshold" min="0.3" max="2.0" value="1.0" step="0.05">
                    <span class="text-sm text-gray-400"><span id="mb-threshold-value">1.0</span></span>
                </div>
                <div>
                    <label for="metaballs-color-slider" class="slider-label">Color Blend:</label>
                    <input type="range" id="metaballs-color-slider" name="mb-color" min="0" max="1" value="0.5" step="0.01">
                    <span class="text-sm text-gray-400"><span id="mb-color-value">0.50</span></span> <!-- Added value display -->
                </div>
            </div>

            <!-- Corrected Lissajous structure -->
            <div id="lissajous-controls" class="control-section animation-controls">
                <h2 class="text-xl font-semibold mb-3 text-gray-100">Lissajous Controls</h2>
                <div>
                    <label for="lissajous-a-slider" class="slider-label">Frequency A (X):</label>
                    <input type="range" id="lissajous-a-slider" name="lj-a" min="1" max="12" value="3" step="1">
                    <span class="text-sm text-gray-400"><span id="lj-a-value">3</span></span>
                </div>
                <div>
                    <label for="lissajous-b-slider" class="slider-label">Frequency B (Y):</label>
                    <input type="range" id="lissajous-b-slider" name="lj-b" min="1" max="12" value="2" step="1">
                    <span class="text-sm text-gray-400"><span id="lj-b-value">2</span></span>
                </div>
                <div>
                    <label for="lissajous-delta-slider" class="slider-label">Phase Shift (Delta):</label>
                    <input type="range" id="lissajous-delta-slider" name="lj-delta" min="0" max="6.28318" value="1.57079" step="0.01"> <!-- Use 2*PI -->
                    <span class="text-sm text-gray-400"><span id="lj-delta-value">PI/2</span> rad</span>
                </div>
                <div>
                    <label for="lissajous-ampA-slider" class="slider-label">Amplitude A (X):</label>
                    <input type="range" id="lissajous-ampA-slider" name="lj-ampA" min="0.5" max="5.0" value="3.0" step="0.1">
                    <span class="text-sm text-gray-400"><span id="lj-ampA-value">3.0</span></span>
                </div>
                <div>
                    <label for="lissajous-ampB-slider" class="slider-label">Amplitude B (Y):</label>
                    <input type="range" id="lissajous-ampB-slider" name="lj-ampB" min="0.5" max="5.0" value="3.0" step="0.1">
                    <span class="text-sm text-gray-400"><span id="lj-ampB-value">3.0</span></span>
                </div>
                <div>
                    <label for="lissajous-speed-slider" class="slider-label">Drawing Speed:</label>
                    <input type="range" id="lissajous-speed-slider" name="lj-speed" min="0.1" max="5.0" value="1.0" step="0.1">
                    <span class="text-sm text-gray-400"><span id="lj-speed-value">1.0</span></span> <!-- Added value display -->
                </div>
                <div>
                    <label for="lissajous-points-slider" class="slider-label">Curve Points:</label>
                    <input type="range" id="lissajous-points-slider" name="lj-points" min="100" max="5000" value="1000" step="50">
                    <span class="text-sm text-gray-400"><span id="lj-points-value">1000</span> points</span>
                </div>
            </div>
        </div>

        <!-- ASCII Output Column -->
        <div class="md:col-span-2">
            <!-- Give container a relative position and a height -->
            <div id="ascii-output-container" class="relative border border-gray-700 rounded-lg overflow-hidden h-[80vh]"> <!-- Added h-[80vh] -->
                <pre id="asciiDisplay" class="absolute inset-0 w-full h-full">Loading ASCII Animation...</pre>
            </div>
            <p class="text-xs text-gray-500 mt-2 text-center">Animation is rendered using Three.js and converted to ASCII characters.</p>
        </div>
    </div>

    <!-- Load Three.js (ensure it's available globally or adjust script.js import) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- Simplex Noise for Particle Flow Field -->
    <script src="https://cdn.jsdelivr.net/npm/simplex-noise@2.4.0/simplex-noise.js"></script>


    <!-- Animation modules (Load BEFORE script.js) -->
    <script src="js/animations/torus.js"></script>
    <script src="js/animations/noise.js"></script>
    <script src="js/animations/particles.js"></script>
    <script src="js/animations/kaleidoscope.js"></script>
    <script src="js/animations/morph.js"></script>
    <script src="js/animations/metaballs.js"></script>
    <script src="js/animations/lissajous.js"></script>

    <!-- Core animation functionality (Load AFTER modules) -->
    <!-- <script src="js/main.js"></script> --> <!-- Removed main.js -->
    <!-- <script type="module" src="js/script.js"></script> --> <!-- Load script.js as module if using import -->
    <!-- If not using import, load as regular script: -->
     <script src="js/script.js"></script> <!-- Removed type="module" -->

</body>
</html>
